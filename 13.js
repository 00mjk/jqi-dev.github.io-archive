(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{376:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  div canvas {\n    width: 100%!important;\n  }\n"],["\n  div canvas {\n    width: 100%!important;\n  }\n"]),i=s(n(2)),a=n(497),u=s(n(496));function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var c=s(n(364)).default.div(o),d=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,a=Array(o),u=0;u<o;u++)a[u]=arguments[u];return n=r=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r.state={speed:.1,color:"red"},r.animationRef=i.default.createRef(),r.colorRef=i.default.createRef(),r.setSpeed=function(e){r.setState({speed:e.target.valueAsNumber})},r.setColor=function(e){"Enter"===e.key&&e.shiftKey&&(r.setState({color:e.target.value}),console.log(e.target.value))},l(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),r(t,[{key:"componentDidMount",value:function(){var e=this;a.Runtime.load(u.default,function(t){return!t.inputs||-1===t.inputs.indexOf("mutable color")&&-1===t.inputs.indexOf("color")?"mutable color"===t.name?{fulfilled:function(t){e.color=t}}:void 0:new a.Inspector(document.getElementById("color").appendChild(document.createElement("div")))})}},{key:"componentDidUpdate",value:function(e,t){t.speed!==this.state.speed&&(this.animationSpeed.value=this.state.speed),t.color!==this.state.color&&(this.color.value=this.state.color)}},{key:"render",value:function(){return i.default.createElement("div",{className:"w-100",id:"testnotebookcontainer"},"An observable notebook",i.default.createElement(c,null,i.default.createElement("div",{ref:this.animationRef})),i.default.createElement("small",null,"Speed: ",this.state.speed),i.default.createElement("br",null),i.default.createElement("input",{type:"text",defaultValue:"red",onKeyPress:this.setColor})," (shift+enter executes)",i.default.createElement("div",{id:"color",ref:this.colorRef}))}}]),t}();t.default=d},496:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=k(['# Five-Minute Introduction\n\nWelcome to Observable! This notebook gives a quick but technical overview of Observable’s features. For a slightly longer introduction, see [Introduction to Notebooks](https://beta.observablehq.com/@mbostock/introduction-to-notebooks) and [introductory tutorial series](https://beta.observablehq.com/collection/introduction). If you want to watch rather than read, we’ve also posted a [short video introduction](https://www.youtube.com/watch?v=uEmDwflQ3xE)!\n\nAn Observable notebook is a sequence of cells. Each cell is a snippet of JavaScript. You can see (and edit!) the code for any cell by clicking the caret <svg width="16" height="16" viewBox="0 0 24 24" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" fill="none"><polyline points="10 18 16 12 10 6"></polyline></svg> in the left margin.'],['# Five-Minute Introduction\n\nWelcome to Observable! This notebook gives a quick but technical overview of Observable’s features. For a slightly longer introduction, see [Introduction to Notebooks](https://beta.observablehq.com/@mbostock/introduction-to-notebooks) and [introductory tutorial series](https://beta.observablehq.com/collection/introduction). If you want to watch rather than read, we’ve also posted a [short video introduction](https://www.youtube.com/watch?v=uEmDwflQ3xE)!\n\nAn Observable notebook is a sequence of cells. Each cell is a snippet of JavaScript. You can see (and edit!) the code for any cell by clicking the caret <svg width="16" height="16" viewBox="0 0 24 24" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" fill="none"><polyline points="10 18 16 12 10 6"></polyline></svg> in the left margin.']),i=k(["Cells can have names. This allows a cell’s value to be referenced by other cells."],["Cells can have names. This allows a cell’s value to be referenced by other cells."]),a=k(["A cell referencing another cell is re-evaluated automatically when the referenced value changes. Try editing the definition of *color* above and shift-return to re-evaluate.\n\nCells can generate DOM (HTML, SVG, Canvas, WebGL, *etc.*). You can use the standard DOM API like *document*.createElement, or use the built-in *html* tagged template literal:"],["A cell referencing another cell is re-evaluated automatically when the referenced value changes. Try editing the definition of *color* above and shift-return to re-evaluate.\n\nCells can generate DOM (HTML, SVG, Canvas, WebGL, *etc.*). You can use the standard DOM API like *document*.createElement, or use the built-in *html* tagged template literal:"]),u=k(['<span style="background:yellow;">\n  My favorite language is <i>HTML</i>.\n</span>'],['<span style="background:yellow;">\n  My favorite language is <i>HTML</i>.\n</span>']),s=k(["There’s a Markdown tagged template literal, too. (This notebook is written in Markdown.)"],["There’s a Markdown tagged template literal, too. (This notebook is written in Markdown.)"]),l=k(["My favorite language is *Markdown*."],["My favorite language is *Markdown*."]),c=k(["DOM can be made reactive simply by referring to other cells. The next cell refers to *color*. (Try editing the definition of *color* above.)"],["DOM can be made reactive simply by referring to other cells. The next cell refers to *color*. (Try editing the definition of *color* above.)"]),d=k(['My favorite color is <i style="background:',';">',"</i>."],['My favorite color is <i style="background:',';">',"</i>."]),f=k(["Sometimes you need to load data from a remote server, or compute something expensive in a web worker. For that, cells can be defined asynchronously using [promises](https://developer.mozilla.org/docs/Web/JavaScript/Guide/Using_promises):"],["Sometimes you need to load data from a remote server, or compute something expensive in a web worker. For that, cells can be defined asynchronously using [promises](https://developer.mozilla.org/docs/Web/JavaScript/Guide/Using_promises):"]),p=k(["A cell that refers to a promise cell sees the value when it is resolved; this implicit await means that referencing cells don’t care whether the value is synchronous or not. Edit the *status* cell above to see the cell below update after two seconds."],["A cell that refers to a promise cell sees the value when it is resolved; this implicit await means that referencing cells don’t care whether the value is synchronous or not. Edit the *status* cell above to see the cell below update after two seconds."]),h=k(["Promises are also useful for loading libraries from npm. Below, `require` returns a promise that resolves to the d3-fetch library:"],["Promises are also useful for loading libraries from npm. Below, \\`require\\` returns a promise that resolves to the d3-fetch library:"]),m=k(["If you prefer, you can use async and await explicitly:"],["If you prefer, you can use async and await explicitly:"]),v=k(["Cells can be defined as [generators](https://developer.mozilla.org/docs/Web/JavaScript/Guide/Iterators_and_Generators#Generators); a value is yielded up to sixty times a second."],["Cells can be defined as [generators](https://developer.mozilla.org/docs/Web/JavaScript/Guide/Iterators_and_Generators#Generators); a value is yielded up to sixty times a second."]),b=k(["Any cell that refers to a generator cell sees its current value; the referencing cell is re-evaluated whenever the generator yields a new value. As you might guess, a generator can yield promises for [async iteration](https://github.com/tc39/proposal-async-iteration); referencing cells see the current resolved value."],["Any cell that refers to a generator cell sees its current value; the referencing cell is re-evaluated whenever the generator yields a new value. As you might guess, a generator can yield promises for [async iteration](https://github.com/tc39/proposal-async-iteration); referencing cells see the current resolved value."]),w=k(["Combining these primitives—promises, generators and DOM—you can build custom user interfaces. Here’s a slider and a generator that yields the slider’s value:"],["Combining these primitives—promises, generators and DOM—you can build custom user interfaces. Here’s a slider and a generator that yields the slider’s value:"]),g=k(["<input type=range>"],["<input type=range>"]),y=k(["Generators.input returns a generator that yields promises. The promise resolves whenever the associated input element emits an input event. You don’t need to implement that generator by hand, though. There’s a builtin viewof operator which exposes the current value of a given input element:"],["Generators.input returns a generator that yields promises. The promise resolves whenever the associated input element emits an input event. You don’t need to implement that generator by hand, though. There’s a builtin viewof operator which exposes the current value of a given input element:"]),_=k(["You can import cells from other notebooks. To demonstrate how custom user interfaces can expose arbitrary values to other cells, here’s a brushable scatterplot of cars showing the inverse relationship between horsepower and fuel efficiency."],["You can import cells from other notebooks. To demonstrate how custom user interfaces can expose arbitrary values to other cells, here’s a brushable scatterplot of cars showing the inverse relationship between horsepower and fuel efficiency."]),x=k(["",""],["",""]);function E(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(o,i){try{var a=t[o](i),u=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(u).then(function(e){r("next",e)},function(e){r("throw",e)});e(u)}("next")})}}function k(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var C={id:"d473c3b3a598a726@356",modules:[{id:"d473c3b3a598a726@356",variables:[{inputs:["md"],value:function(e){return e(o)}},{value:function(){return 42}},{value:function(){for(var e=0,t=0;t<=100;++t)e+=t;return e}},{inputs:["md"],value:function(e){return e(i)}},{name:"initial color",value:function(){return"red"}},{name:"mutable color",inputs:["Mutable","initial color"],value:function(e,t){return new e(t)}},{name:"color",inputs:["mutable color"],value:function(e){return e.generator}},{inputs:["color"],value:function(e){return"My favorite color is "+e+"."}},{inputs:["md"],value:function(e){return e(a)}},{inputs:["html"],value:function(e){return e(u)}},{inputs:["md"],value:function(e){return e(s)}},{inputs:["md"],value:function(e){return e(l)}},{inputs:["md"],value:function(e){return e(c)}},{name:"html_color",inputs:["html","color"],value:function(e,t){return e(d,t,t)}},{inputs:["md"],value:function(e){return e(f)}},{name:"status",value:function(){return new Promise(function(e){setTimeout(function(){e({resolved:new Date})},2e3)})}},{inputs:["md"],value:function(e){return e(p)}},{inputs:["status"],value:function(e){return e}},{inputs:["md"],value:function(e){return e(h)}},{name:"d3",inputs:["require"],value:function(e){return e("d3-fetch@1")}},{inputs:["md"],value:function(e){return e(m)}},{name:"countries",inputs:["d3"],value:function(){var e=E(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.tsv("https://unpkg.com/world-atlas@1/world/110m.tsv");case 2:return e.t0=function(e,t){return t.pop_est-e.pop_est},e.abrupt("return",e.sent.sort(e.t0).slice(0,10));case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{inputs:["md"],value:function(e){return e(v)}},{name:"i",value:regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=0;case 1:return e.next=4,++t;case 4:e.next=1;break;case 6:case"end":return e.stop()}},e,this)})},{inputs:["i"],value:function(e){return"The current value of i is "+e+"."}},{inputs:["md"],value:function(e){return e(b)}},{name:"date",value:regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,new Promise(function(e){setTimeout(function(){return e(new Date)},1e3)});case 3:e.next=0;break;case 5:case"end":return e.stop()}},e,this)})},{inputs:["md"],value:function(e){return e(w)}},{name:"slider",inputs:["html"],value:function(e){return e(g)}},{name:"sliderValue",inputs:["Generators","slider"],value:function(e,t){return e.input(t)}},{inputs:["md"],value:function(e){return e(y)}},{name:"viewof value",inputs:["html"],value:function(e){return e(g)}},{name:"value",inputs:["Generators","viewof value"],value:function(e,t){return e.input(t)}},{inputs:["value"],value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return e})},{inputs:["md"],value:function(e){return e(_)}},{from:"@mbostock/d3-brushable-scatterplot",name:"cars",remote:"selection"},{inputs:["cars"],value:function(e){return e}},{inputs:["cars"],value:function(e){return e}},{inputs:["md","cars"],value:function(e,t){return e(x,Array.from(new Set(t.map(function(e){return e.name}))).sort().map(function(e){return'* <a target="_blank" href="https://google.com/search?tbm=isch&q='+escape(e)+'">'+e+"</a>"}).join("\n"))}}]},{id:"@mbostock/d3-brushable-scatterplot",variables:[{name:"viewof selection",inputs:["d3","DOM","width","height","xAxis","yAxis","data","x","y","margin"],value:function(e,t,n,o,i,a,u,s,l,c){var d=e.select(t.svg(n,o)).property("value",[]);d.append("g").call(i),d.append("g").call(a);d.append("g").attr("fill","none").attr("stroke","steelblue").attr("stroke-width",1.5).selectAll("g").data(u).enter().append("circle").attr("transform",function(e){return"translate("+s(e.x)+","+l(e.y)+")"}).attr("r",3);return d.append("g").call(e.brush().extent([[c.left,c.top],[n-c.right,o-c.bottom]]).on("start brush end",function(){var t=[];if(e.event.selection){var n=r(e.event.selection,2),o=r(n[0],2),i=o[0],a=o[1],c=r(n[1],2),f=c[0],p=c[1];t=u.filter(function(e){return i<=s(e.x)&&s(e.x)<f&&a<=l(e.y)&&l(e.y)<p})}d.property("value",t).dispatch("input")})),d.node()}},{name:"selection",inputs:["Generators","viewof selection"],value:function(e,t){return e.input(t)}},{name:"d3",inputs:["require"],value:function(e){return e("https://d3js.org/d3.v5.min.js")}},{name:"height",value:function(){return 600}},{name:"xAxis",inputs:["height","margin","d3","x","width","data"],value:function(e,t,n,r,o,i){return function(a){return a.attr("transform","translate(0,"+(e-t.bottom)+")").call(n.axisBottom(r)).call(function(e){return e.select(".domain").remove()}).call(function(e){return e.append("text").attr("x",o-t.right).attr("y",-4).attr("fill","#000").attr("font-weight","bold").attr("text-anchor","end").text(i.x)})}}},{name:"yAxis",inputs:["margin","d3","y","data"],value:function(e,t,n,r){return function(o){return o.attr("transform","translate("+e.left+",0)").call(t.axisLeft(n)).call(function(e){return e.select(".domain").remove()}).call(function(e){return e.select(".tick:last-of-type text").clone().attr("x",4).attr("text-anchor","start").attr("font-weight","bold").text(r.y)})}}},{name:"data",inputs:["require"],value:function(){var e=E(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t("@observablehq/cars");case 2:return n=e.sent,(r=n.map(function(e){return{name:e.Name,x:e.Miles_per_Gallon,y:e.Horsepower}})).x="Miles per Gallon",r.y="Horsepower",e.abrupt("return",r);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{name:"x",inputs:["d3","data","margin","width"],value:function(e,t,n,r){return e.scaleLinear().domain(e.extent(t,function(e){return e.x})).nice().range([n.left,r-n.right])}},{name:"y",inputs:["d3","data","height","margin"],value:function(e,t,n,r){return e.scaleLinear().domain(e.extent(t,function(e){return e.y})).nice().range([n-r.bottom,r.top])}},{name:"margin",value:function(){return{top:20,right:30,bottom:30,left:40}}}]}]};t.default=C},497:function(e,t,n){"use strict";function r(e,t,n){n=n||{};var r=e.ownerDocument,o=r.defaultView.CustomEvent;"function"==typeof o?o=new o(t,{detail:n}):((o=r.createEvent("Event")).initEvent(t,!1,!1),o.detail=n),e.dispatchEvent(o)}function o(e){return Array.isArray(e)||e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array}function i(e){return e===(0|e)+""}n.r(t),n.d(t,"Inspector",function(){return J}),n.d(t,"Library",function(){return Le}),n.d(t,"Runtime",function(){return nt}),n.d(t,"RuntimeError",function(){return Re});const a=Symbol.prototype.toString;function u(e){return a.call(e)}const{getOwnPropertySymbols:s,prototype:{hasOwnProperty:l}}=Object,{toStringTag:c}=Symbol,d={},f=s;function p(e,t){return l.call(e,t)}function h(e){return e[c]||e.constructor&&e.constructor.name||"Object"}function m(e,t){try{const n=e[t];return n&&n.constructor,n}catch(e){return d}}function v(e){const t=o(e);let n,i,a;e instanceof Map?(n=`Map(${e.size})`,i=b):e instanceof Set?(n=`Set(${e.size})`,i=w):t?(n=`${e.constructor.name}(${e.length})`,i=g):(n=h(e),i=y);const u=document.createElement("span");u.className="observablehq--expanded";const s=u.appendChild(document.createElement("a"));s.innerHTML="<svg width=8 height=8 class='observablehq--caret'>\n    <path d='M4 7L0 1h8z' fill='currentColor' />\n  </svg>",s.appendChild(document.createTextNode(`${n}${t?" [":" {"}`)),s.addEventListener("mouseup",function(t){t.stopPropagation(),W(u,k(e))}),i=i(e);for(let e=0;!(a=i.next()).done&&e<20;++e)u.appendChild(a.value);if(!a.done){const e=u.appendChild(document.createElement("a"));e.className="observablehq--field",e.style.display="block",e.appendChild(document.createTextNode("  … more")),e.addEventListener("mouseup",function(e){e.stopPropagation(),u.insertBefore(a.value,u.lastChild.previousSibling);for(let e=0;!(a=i.next()).done&&e<19;++e)u.insertBefore(a.value,u.lastChild.previousSibling);a.done&&u.removeChild(u.lastChild.previousSibling),r(u,"load")})}return u.appendChild(document.createTextNode(t?"]":"}")),u}function*b(e){for(const[t,n]of e)yield x(t,n);yield*y(e)}function*w(e){for(const t of e)yield E(t);yield*y(e)}function*g(e){for(let t=0,n=e.length;t<n;++t)t in e&&(yield _(t,m(e,t),"observablehq--index"));for(const t in e)!i(t)&&p(e,t)&&(yield _(t,m(e,t),"observablehq--key"));for(const t of f(e))yield _(u(t),m(e,t),"observablehq--symbol")}function*y(e){for(const t in e)p(e,t)&&(yield _(t,m(e,t),"observablehq--key"));for(const t of f(e))yield _(u(t),m(e,t),"observablehq--symbol")}function _(e,t,n){const r=document.createElement("div"),o=r.appendChild(document.createElement("span"));return r.className="observablehq--field",o.className=n,o.textContent=`  ${e}`,r.appendChild(document.createTextNode(": ")),r.appendChild(U(t)),r}function x(e,t){const n=document.createElement("div");return n.className="observablehq--field",n.appendChild(document.createTextNode("  ")),n.appendChild(U(e)),n.appendChild(document.createTextNode(" => ")),n.appendChild(U(t)),n}function E(e){const t=document.createElement("div");return t.className="observablehq--field",t.appendChild(document.createTextNode("  ")),t.appendChild(U(e)),t}function k(e,t){const n=o(e);let r,i,a;if(e instanceof Map?(r=`Map(${e.size})`,i=C):e instanceof Set?(r=`Set(${e.size})`,i=M):n?(r=`${e.constructor.name}(${e.length})`,i=O):(r=h(e),i=S),t){const t=document.createElement("span");return t.className="observablehq--shallow",t.appendChild(document.createTextNode(r)),t.addEventListener("mouseup",function(n){n.stopPropagation(),W(t,k(e))}),t}const u=document.createElement("span");u.className="observablehq--collapsed";const s=u.appendChild(document.createElement("a"));s.innerHTML="<svg width=8 height=8 class='observablehq--caret'>\n    <path d='M7 4L1 8V0z' fill='currentColor' />\n  </svg>",s.appendChild(document.createTextNode(`${r}${n?" [":" {"}`)),u.addEventListener("mouseup",function(t){t.stopPropagation(),W(u,v(e))},!0),i=i(e);for(let e=0;!(a=i.next()).done&&e<20;++e)e>0&&u.appendChild(document.createTextNode(", ")),u.appendChild(a.value);return a.done||u.appendChild(document.createTextNode(", …")),u.appendChild(document.createTextNode(n?"]":"}")),u}function*C(e){for(const[t,n]of e)yield j(t,n);yield*S(e)}function*M(e){for(const t of e)yield U(t,!0);yield*S(e)}function*O(e){for(let t=-1,n=0,r=e.length;n<r;++n)if(n in e){let r=n-t-1;if(r>0){const e=document.createElement("span");e.className="observablehq--empty",e.textContent=1===r?"empty":`empty × ${n-t-1}`,yield e}yield U(m(e,n),!0),t=n}for(const t in e)!i(t)&&p(e,t)&&(yield P(t,m(e,t),"observablehq--key"));for(const t of f(e))yield P(u(t),m(e,t),"observablehq--symbol")}function*S(e){for(const t in e)p(e,t)&&(yield P(t,m(e,t),"observablehq--key"));for(const t of f(e))yield P(u(t),m(e,t),"observablehq--symbol")}function P(e,t,n){const r=document.createDocumentFragment(),o=r.appendChild(document.createElement("span"));return o.className=n,o.textContent=e,r.appendChild(document.createTextNode(": ")),r.appendChild(U(t,!0)),r}function j(e,t){const n=document.createDocumentFragment();return n.appendChild(U(e,!0)),n.appendChild(document.createTextNode(" => ")),n.appendChild(U(t,!0)),n}function T(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}var N=Error.prototype.toString,q=RegExp.prototype.toString;function A(e){var t=e.charCodeAt(0);return t<16?"\\x0"+t.toString(16):t<32?"\\x"+t.toString(16):"\\"+e}function L(e,t){for(var n=0;t.exec(e);)++n;return n}var R=Function.prototype.toString,$={prefix:"async ƒ"},D={prefix:"async ƒ*"},F={prefix:"class"},I={prefix:"ƒ"},G={prefix:"ƒ*"};function z(e,t){var n=document.createElement("span");n.className="observablehq--function";var r=n.appendChild(document.createElement("span"));return r.className="observablehq--keyword",r.textContent=e.prefix,n.appendChild(document.createTextNode(" "+t)),n}const{prototype:{toString:H}}=Object;function U(e,t,n){let r=typeof e;switch(r){case"boolean":case"undefined":e+="";break;case"number":e=0===e&&1/e<0?"-0":e+"";break;case"bigint":e+="n";break;case"string":e=function(e,t){return t?(L(e,/["\n]/g)<=L(e,/`|\${/g)?JSON.stringify:function(e){return"`"+e.replace(/[\\`\x00-\x09\x0b-\x19]|\${/g,A)+"`"})(e):(e.length>100&&(e=`${e.slice(0,50)}…${e.slice(-49)}`),JSON.stringify(e))}(e,!1===t);break;case"symbol":e=u(e);break;case"function":return function(e){var t,n,r=R.call(e);switch(e.constructor&&e.constructor.name){case"AsyncFunction":t=$;break;case"AsyncGeneratorFunction":t=D;break;case"GeneratorFunction":t=G;break;default:t=/^class\b/.test(r)?F:I}return t===F?z(t,e.name||""):(n=/^(?:async\s*)?(\w+)\s*=>/.exec(r))?z(t,"("+n[1]+")"):(n=/^(?:async\s*)?\(\s*(\w+(?:\s*,\s*\w+)*)?\s*\)/.exec(r))?z(t,n[1]?"("+n[1].replace(/\s*,\s*/g,", ")+")":"()"):(n=/^(?:async\s*)?function(?:\s*\*)?(?:\s*\w+)?\s*\(\s*(\w+(?:\s*,\s*\w+)*)?\s*\)/.exec(r))?z(t,(e.name||"")+(n[1]?"("+n[1].replace(/\s*,\s*/g,", ")+")":"()")):z(t,(e.name||"")+"(…)")}(e);default:if(null===e){r=null,e="null";break}if(e instanceof Date){r="date",e=function(e){return isNaN(e)?"Invalid Date":T(e.getFullYear(),4)+"-"+T(e.getMonth()+1,2)+"-"+T(e.getDate(),2)+(e.getMilliseconds()?"T"+T(e.getHours(),2)+":"+T(e.getMinutes(),2)+":"+T(e.getSeconds(),2)+"."+T(e.getMilliseconds(),3):e.getSeconds()?"T"+T(e.getHours(),2)+":"+T(e.getMinutes(),2)+":"+T(e.getSeconds(),2):e.getMinutes()||e.getHours()?"T"+T(e.getHours(),2)+":"+T(e.getMinutes(),2):"")}(e);break}if(e===d){r="forbidden",e="[forbidden]";break}switch(H.call(e)){case"[object RegExp]":r="regexp",e=function(e){return q.call(e)}(e);break;case"[object Error]":case"[object DOMException]":r="error",e=function(e){return e.stack||N.call(e)}(e);break;default:return(n?v:k)(e,t)}}const o=document.createElement("span");return o.className=`observablehq--${r}`,o.textContent=e,o}function W(e,t){e.classList.contains("observablehq--inspect")&&t.classList.add("observablehq--inspect"),e.parentNode.replaceChild(t,e),r(t,"load")}const B=/\s+\(\d+:\d+\)$/m;class J{constructor(e){if(!e)throw new Error("invalid node");this._node=e,e.classList.add("observablehq")}pending(){const{_node:e}=this;e.classList.remove("observablehq--error"),e.classList.add("observablehq--running")}fulfilled(e){const{_node:t}=this;if((!(e instanceof Element||e instanceof Text)||e.parentNode&&e.parentNode!==t)&&(e=U(e,!1,t.firstChild&&t.firstChild.classList&&t.firstChild.classList.contains("observablehq--expanded"))).classList.add("observablehq--inspect"),t.classList.remove("observablehq--running","observablehq--error"),t.firstChild!==e)if(t.firstChild){for(;t.lastChild!==t.firstChild;)t.removeChild(t.lastChild);t.replaceChild(e,t.firstChild)}else t.appendChild(e);r(t,"update")}rejected(e){const{_node:t}=this;for(t.classList.remove("observablehq--running"),t.classList.add("observablehq--error");t.lastChild;)t.removeChild(t.lastChild);var n=document.createElement("span");n.className="observablehq--inspect",n.textContent=(e+"").replace(B,""),t.appendChild(n),r(t,"error",{error:e})}}function Y(e){return function(){return e}}J.into=function(e){if("string"==typeof e&&null==(e=document.querySelector(e)))throw new Error("container not found");return function(){return new J(e.appendChild(document.createElement("div")))}};var V={math:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},K=0;function Q(e){this.id=e,this.href=window.location.href+"#"+e}Q.prototype.toString=function(){return"url("+this.href+")"};var X={canvas:function(e,t){var n=document.createElement("canvas");return n.width=e,n.height=t,n},context2d:function(e,t,n){null==n&&(n=devicePixelRatio);var r=document.createElement("canvas");r.width=e*n,r.height=t*n,r.style.width=e+"px";var o=r.getContext("2d");return o.scale(n,n),o},download:function(e,t,n){var r=document.createElement("a");return r.appendChild(document.createElement("button")).textContent=null==n?"Download":n,r.download=null==t?"untitled":t,r.onclick=function(){var t=r.href=URL.createObjectURL(e);setTimeout(function(){URL.revokeObjectURL(t)},50)},r},element:function(e,t){var n,r=e+="",o=r.indexOf(":");o>=0&&"xmlns"!==(r=e.slice(0,o))&&(e=e.slice(o+1));var i=V.hasOwnProperty(r)?document.createElementNS(V[r],e):document.createElement(e);if(t)for(var a in t)o=(r=a).indexOf(":"),n=t[a],o>=0&&"xmlns"!==(r=a.slice(0,o))&&(a=a.slice(o+1)),V.hasOwnProperty(r)?i.setAttributeNS(V[r],a,n):i.setAttribute(a,n);return i},input:function(e){var t=document.createElement("input");return null!=e&&(t.type=e),t},range:function(e,t,n){1===arguments.length&&(t=e,e=null);var r=document.createElement("input");return r.min=e=null==e?0:+e,r.max=t=null==t?1:+t,r.step=null==n?"any":n=+n,r.type="range",r},select:function(e){var t=document.createElement("select");return Array.prototype.forEach.call(e,function(e){var n=document.createElement("option");n.value=n.textContent=e,t.appendChild(n)}),t},svg:function(e,t){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");return n.setAttribute("viewBox",[0,0,e,t]),n.setAttribute("width",e),n.setAttribute("height",t),n},text:function(e){return document.createTextNode(e)},uid:function(e){return new Q("O-"+(null==e?"":e+"-")+ ++K)}},Z={buffer:function(e){return new Promise(function(t,n){var r=new FileReader;r.onload=function(){t(r.result)},r.onerror=n,r.readAsArrayBuffer(e)})},text:function(e){return new Promise(function(t,n){var r=new FileReader;r.onload=function(){t(r.result)},r.onerror=n,r.readAsText(e)})},url:function(e){return new Promise(function(t,n){var r=new FileReader;r.onload=function(){t(r.result)},r.onerror=n,r.readAsDataURL(e)})}};function ee(){return this}function te(e,t){let n=!1;return{[Symbol.iterator]:ee,next:()=>n?{done:!0}:(n=!0,{done:!1,value:e}),return:()=>(n=!0,t(e),{done:!0}),throw:()=>({done:n=!0})}}function ne(e){let t,n,r=!1;const o=e(function(e){return n?(n(e),n=null):r=!0,t=e});return{[Symbol.iterator]:ee,throw:()=>({done:!0}),return:()=>(null!=o&&o(),{done:!0}),next:function(){return{done:!1,value:r?(r=!1,Promise.resolve(t)):new Promise(e=>n=e)}}}}function re(e){switch(e.type){case"range":case"number":return e.valueAsNumber;case"date":return e.valueAsDate;case"checkbox":return e.checked;case"file":return e.multiple?e.files:e.files[0];default:return e.value}}var oe={disposable:te,filter:function*(e,t){for(var n,r=-1;!(n=e.next()).done;)t(n.value,++r)&&(yield n.value)},input:function(e){return ne(function(t){var n=function(e){switch(e.type){case"button":case"submit":case"checkbox":return"click";case"file":return"change";default:return"input"}}(e),r=re(e);function o(){t(re(e))}return e.addEventListener(n,o),void 0!==r&&t(r),function(){e.removeEventListener(n,o)}})},map:function*(e,t){for(var n,r=-1;!(n=e.next()).done;)yield t(n.value,++r)},observe:ne,queue:function(e){let t;const n=[],r=e(function(e){return n.push(e),t&&(t(n.shift()),t=null),e});return{[Symbol.iterator]:ee,throw:()=>({done:!0}),return:()=>(null!=r&&r(),{done:!0}),next:function(){return{done:!1,value:n.length?Promise.resolve(n.shift()):new Promise(e=>t=e)}}}},range:function*(e,t,n){e=+e,t=+t,n=(o=arguments.length)<2?(t=e,e=0,1):o<3?1:+n;for(var r=-1,o=0|Math.max(0,Math.ceil((t-e)/n));++r<o;)yield e+r*n},valueAt:function(e,t){if(!(!isFinite(t=+t)||t<0||t!=t|0))for(var n,r=-1;!(n=e.next()).done;)if(++r===t)return n.value},worker:function(e){const t=URL.createObjectURL(new Blob([e],{type:"text/javascript"})),n=new Worker(t);return te(n,()=>{n.terminate(),URL.revokeObjectURL(t)})}};function ie(e,t){return function(n){var r,o,i,a,u,s,l,c,d=n[0],f=[],p=null,h=-1;for(u=1,s=arguments.length;u<s;++u){if((r=arguments[u])instanceof Node)f[++h]=r,d+="\x3c!--o:"+h+"--\x3e";else if(Array.isArray(r)){for(l=0,c=r.length;l<c;++l)(o=r[l])instanceof Node?(null===p&&(f[++h]=p=document.createDocumentFragment(),d+="\x3c!--o:"+h+"--\x3e"),p.appendChild(o)):(p=null,d+=o);p=null}else d+=r;d+=n[u]}if(p=e(d),++h>0){for(i=new Array(h),a=document.createTreeWalker(p,NodeFilter.SHOW_COMMENT,null,!1);a.nextNode();)o=a.currentNode,/^o:/.test(o.nodeValue)&&(i[+o.nodeValue.slice(2)]=o);for(u=0;u<h;++u)(o=i[u])&&o.parentNode.replaceChild(f[u],o)}return 1===p.childNodes.length?p.removeChild(p.firstChild):11===p.nodeType?((o=t()).appendChild(p),o):p}}var ae=ie(function(e){var t=document.createElement("template");return t.innerHTML=e.trim(),document.importNode(t.content,!0)},function(){return document.createElement("div")});function ue(e){let t;Object.defineProperties(this,{generator:{value:ne(e=>void(t=e))},value:{get:()=>e,set:n=>t(e=n)}}),void 0!==e&&t(e)}function*se(){for(;;)yield Date.now()}var le=new Map;function ce(e,t){var n;return(n=le.get(e=+e))?n.then(Y(t)):(n=Date.now())>=e?Promise.resolve(t):function(e,t){var n=new Promise(function(n){le.delete(t);var r=t-e;if(!(r>0))throw new Error("invalid time");if(r>2147483647)throw new Error("too long to wait");setTimeout(n,r)});return le.set(t,n),n}(n,e).then(Y(t))}var de={delay:function(e,t){return new Promise(function(n){setTimeout(function(){n(t)},e)})},tick:function(e,t){return ce(Math.ceil((Date.now()+1)/e)*e,t)},when:ce};function fe(e,t){if(/^(\w+:)|\/\//i.test(e))return e;if(/^[.]{0,2}\//i.test(e))return new URL(e,null==t?location:t).href;if(!e.length||/^[\s._]/.test(e)||/\s$/.test(e))throw new Error("illegal name");return"https://unpkg.com/"+e}const pe=new Map,he=new Map,me=[],ve=me.map,be=me.some,we=me.hasOwnProperty,ge="https://unpkg.com/",ye=/^((?:@[^/@]+\/)?[^/@]+)(?:@([^/]+))?(?:\/(.*))?$/;function _e(e){return"string"==typeof e?e:""}function xe(e){const t=ye.exec(e);return t&&{name:t[1],version:t[2],path:t[3]}}function Ee(e){const t=`${ge}${e.name}${e.version?`@${e.version}`:""}/package.json`;let n=pe.get(t);return n||pe.set(t,n=fetch(t).then(e=>{if(!e.ok)throw new Error("unable to load package.json");return e.redirected&&!pe.has(e.url)&&pe.set(e.url,n),e.json()})),n}const ke=Ce(async function(e,t){if(e.startsWith(ge)&&(e=e.substring(ge.length)),/^(\w+:)|\/\//i.test(e))return e;if(/^[.]{0,2}\//i.test(e))return new URL(e,null==t?location:t).href;if(!e.length||/^[\s._]/.test(e)||/\s$/.test(e))throw new Error("illegal name");const n=xe(e);if(!n)return`${ge}${e}`;if(!n.version&&null!=t&&t.startsWith(ge)){const e=await Ee(xe(t.substring(ge.length)));n.version=e.dependencies&&e.dependencies[n.name]||e.peerDependencies&&e.peerDependencies[n.name]}const r=await Ee(n);return`${ge}${r.name}@${r.version}/${n.path||_e(r.unpkg)||_e(r.browser)||_e(r.main)||"index.js"}`});function Ce(e){const t=r(null);function n(e){if("string"!=typeof e)return e;let t=he.get(e);return t||he.set(e,t=new Promise((t,n)=>{const o=document.createElement("script");o.onload=(()=>{try{t(me.pop()(r(e)))}catch(e){n(new Error("invalid module"))}o.remove()}),o.onerror=(()=>{n(new Error("unable to load module")),o.remove()}),o.async=!0,o.src=e,window.define=Pe,document.head.appendChild(o)})),t}function r(t){return r=>Promise.resolve(e(r,t)).then(n)}function o(e){return arguments.length>1?Promise.all(ve.call(arguments,t)).then(Me):t(e)}return o.alias=function(t){return Ce((n,r)=>n in t&&(r=null,"string"!=typeof(n=t[n]))?n:e(n,r))},o.resolve=e,o}function Me(e){const t={};for(const n of e)for(const e in n)we.call(n,e)&&(null==n[e]?Object.defineProperty(t,e,{get:Oe(n,e)}):t[e]=n[e]);return t}function Oe(e,t){return()=>e[t]}function Se(e){return e+""=="exports"}function Pe(e,t,n){const r=arguments.length;r<2?(n=e,t=[]):r<3&&(n=t,t="string"==typeof e?[]:e),me.push(be.call(t,Se)?e=>{const r={};return Promise.all(ve.call(t,t=>Se(t+="")?r:e(t))).then(e=>(n.apply(null,e),r))}:e=>Promise.all(ve.call(t,e)).then(e=>"function"==typeof n?n.apply(null,e):n))}Pe.amd={};var je=ie(function(e){var t=document.createElementNS("http://www.w3.org/2000/svg","g");return t.innerHTML=e.trim(),t},function(){return document.createElementNS("http://www.w3.org/2000/svg","g")}),Te=String.raw;function Ne(e){return new Promise(function(t,n){var r=document.createElement("link");r.rel="stylesheet",r.href=e,r.onerror=n,r.onload=t,document.head.appendChild(r)})}var qe=28;function Ae(){return ne(function(e){var t=e(window.innerWidth-qe);function n(){var n=window.innerWidth-qe;n!==t&&e(t=n)}return window.addEventListener("resize",n),function(){window.removeEventListener("resize",n)}})}function Le(e){const t=function(e){return null==e?ke:Ce(e)}(e);Object.defineProperties(this,{DOM:{value:X,enumerable:!0},Files:{value:Z,enumerable:!0},Generators:{value:oe,enumerable:!0},html:{value:Y(ae),enumerable:!0},md:{value:function(e){return function(){return e("marked@0.3.12/marked.min.js").then(function(t){return ie(function(n){var r=document.createElement("div");r.innerHTML=t(n,{langPrefix:""}).trim();var o=r.querySelectorAll("pre code[class]");return o.length>0&&e("@observablehq/highlight.js@1.0.0/highlight.min.js").then(function(e){o.forEach(e.highlightBlock)}),r},function(){return document.createElement("div")})})}}(t),enumerable:!0},Mutable:{value:Y(ue),enumerable:!0},now:{value:se,enumerable:!0},Promises:{value:de,enumerable:!0},require:{value:Y(t),enumerable:!0},resolve:{value:Y(fe),enumerable:!0},svg:{value:Y(je),enumerable:!0},tex:{value:function(e){return function(){return Promise.all([e("@observablehq/katex@0.10.1/dist/katex.min.js"),e.resolve("@observablehq/katex@0.10.1/dist/katex.min.css").then(Ne)]).then(function(e){var t=e[0],n=r();function r(e){return function(){var n=document.createElement("div");return t.render(Te.apply(String,arguments),n,e),n.removeChild(n.firstChild)}}return n.block=r({displayMode:!0}),n})}}(t),enumerable:!0},width:{value:Ae,enumerable:!0}})}function Re(e,t){this.message=e+"",this.input=t}Re.prototype=Object.create(Error.prototype),Re.prototype.name="RuntimeError",Re.prototype.constructor=Re;var $e=Array.prototype,De=$e.map,Fe=$e.forEach,Ie=function(e){return e},Ge=function(){},ze=2,He=3,Ue={};function We(e,t,n){var r;null==n&&(n=Ue),Object.defineProperties(this,{_observer:{value:n,writable:!0},_definition:{value:Ye,writable:!0},_duplicate:{value:void 0,writable:!0},_duplicates:{value:void 0,writable:!0},_indegree:{value:-1,writable:!0},_inputs:{value:[],writable:!0},_invalidate:{value:Ge,writable:!0},_module:{value:t},_name:{value:null,writable:!0},_outputs:{value:new Set,writable:!0},_promise:{value:Promise.resolve(void 0),writable:!0},_reachable:{value:n!==Ue,writable:!0},_rejector:{value:(r=this,function(e){if(e===Ye)throw new Re(r._name+" is not defined",r._name);throw new Re(r._name+" could not be resolved",r._name)})},_type:{value:e},_value:{value:void 0,writable:!0},_version:{value:0,writable:!0}})}function Be(e){e._module._runtime._dirty.add(e),e._outputs.add(this)}function Je(e){e._module._runtime._dirty.add(e),e._outputs.delete(this)}function Ye(){throw Ye}function Ve(e){return function(){throw new Re(e+" is defined more than once")}}function Ke(e,t,n){var r=this._module._scope,o=this._module._runtime;if(this._inputs.forEach(Je,this),t.forEach(Be,this),this._inputs=t,this._definition=n,this._value=void 0,e==this._name&&r.get(e)===this)this._outputs.forEach(o._updates.add,o._updates);else{var i,a;if(this._name)if(this._outputs.size)r.delete(this._name),(a=this._module._resolve(this._name))._outputs=this._outputs,this._outputs=new Set,a._outputs.forEach(function(e){e._inputs[e._inputs.indexOf(this)]=a},this),a._outputs.forEach(o._updates.add,o._updates),o._dirty.add(a).add(this),r.set(this._name,a);else if((a=r.get(this._name))===this)r.delete(this._name);else{if(a._type!==He)throw new Error;a._duplicates.delete(this),this._duplicate=void 0,1===a._duplicates.size&&(a=a._duplicates.keys().next().value,i=r.get(this._name),a._outputs=i._outputs,i._outputs=new Set,a._outputs.forEach(function(e){e._inputs[e._inputs.indexOf(i)]=a}),a._definition=a._duplicate,a._duplicate=void 0,o._dirty.add(i).add(a),o._updates.add(a),r.set(this._name,a))}if(this._outputs.size)throw new Error;e&&((a=r.get(e))?a._type===He?(this._definition=Ve(e),this._duplicate=n,a._duplicates.add(this)):a._type===ze?(this._outputs=a._outputs,a._outputs=new Set,this._outputs.forEach(function(e){e._inputs[e._inputs.indexOf(a)]=this},this),o._dirty.add(a).add(this),r.set(e,this)):(a._duplicate=a._definition,this._duplicate=n,(i=new We(He,this._module))._name=e,i._definition=this._definition=a._definition=Ve(e),i._outputs=a._outputs,a._outputs=new Set,i._outputs.forEach(function(e){e._inputs[e._inputs.indexOf(a)]=i}),i._duplicates=new Set([this,a]),o._dirty.add(a).add(i),o._updates.add(a).add(i),r.set(e,i)):r.set(e,this)),this._name=e}return o._updates.add(this),o._compute(),this}Object.defineProperties(We.prototype,{_pending:{value:function(){this._observer.pending&&this._observer.pending()},writable:!0,configurable:!0},_fulfilled:{value:function(e){this._observer.fulfilled&&this._observer.fulfilled(e)},writable:!0,configurable:!0},_rejected:{value:function(e){this._observer.rejected&&this._observer.rejected(e)},writable:!0,configurable:!0},define:{value:function(e,t,n){switch(arguments.length){case 1:n=e,e=t=null;break;case 2:n=t,"string"==typeof e?t=null:(t=e,e=null)}return Ke.call(this,null==e?null:e+"",null==t?[]:De.call(t,this._module._resolve,this._module),"function"==typeof n?n:function(e){return function(){return e}}(n))},writable:!0,configurable:!0},delete:{value:function(){return Ke.call(this,null,[],Ge)},writable:!0,configurable:!0},import:{value:function(e,t,n){return arguments.length<3&&(n=t,t=e),Ke.call(this,t+"",[n._resolve(e+"")],Ie)},writable:!0,configurable:!0}});var Qe=new Map;function Xe(e){Object.defineProperties(this,{_runtime:{value:e},_scope:{value:new Map}})}function Ze(e){return e._name}Object.defineProperties(Xe.prototype,{_copy:{value:function(e,t,n){var r=new Xe(this._runtime);return n.set(this,r),this._scope.forEach(function(o,i){var a,u=new We(o._type,r);if(a=e.get(i))u.import(a.name,a.alias,t);else if(o._definition===Ie){var s=o._inputs[0],l=s._module,c=n.get(l)||l._copy(Qe,null,n);u.import(s._name,i,c)}else u.define(i,o._inputs.map(Ze),o._definition)}),r},writable:!0,configurable:!0},_resolve:{value:function(e){var t=this._scope.get(e);return t||(t=new We(ze,this),this._runtime._builtin._scope.has(e)?t.import(e,this._runtime._builtin):"invalidation"===e?t.define(e,et):"visibility"===e?t.define(e,tt):this._scope.set(t._name=e,t)),t},writable:!0,configurable:!0},define:{value:function(){var e=new We(1,this);return e.define.apply(e,arguments)},writable:!0,configurable:!0},derive:{value:function(e,t){var n=new Map;return Fe.call(e,function(e){"object"!=typeof e&&(e={name:e+""}),null==e.alias&&(e.alias=e.name),n.set(e.alias,e)}),this._copy(n,t,new Map)},writable:!0,configurable:!0},import:{value:function(){var e=new We(1,this);return e.import.apply(e,arguments)},writable:!0,configurable:!0},variable:{value:function(e){return new We(1,this,e)},writable:!0,configurable:!0}});var et={},tt={};function nt(e){var t=this.module();if(Object.defineProperties(this,{_dirty:{value:new Set},_updates:{value:new Set},_computing:{value:null,writable:!0},_builtin:{value:t}}),e)for(var n in e)new We(ze,t).define(n,[],e[n])}function rt(e){++e._indegree}function ot(e){return e._promise.catch(e._rejector)}function it(e){return new Promise(function(t){e._invalidate=t})}function at(e,t){let n,r,o="function"==typeof IntersectionObserver&&t._observer&&t._observer._node,i=!o,a=Ge,u=Ge;return o&&((r=new IntersectionObserver(([e])=>(i=e.isIntersecting)&&(n=null,a()))).observe(o),e.then(()=>(r.disconnect(),r=null,u()))),function(e){return i?Promise.resolve(e):r?(n||(n=new Promise((e,t)=>(a=e,u=t))),n.then(()=>e)):Promise.reject()}}function ut(e){e._invalidate(),e._invalidate=Ge,e._pending();var t=e._value,n=++e._version,r=null,o=e._promise=Promise.all(e._inputs.map(ot)).then(function(o){if(e._version===n){for(var i=0,a=o.length;i<a;++i)switch(o[i]){case et:o[i]=r=it(e);break;case tt:r||(r=it(e)),o[i]=at(r,e)}return e._definition.apply(t,o)}}).then(function(t){return function(e){return e&&"function"==typeof e.next&&"function"==typeof e.return}(t)?((r||it(e)).then((i=t,function(){i.return()})),function(e,t,n,r){function o(){var n=new Promise(function(e){e(r.next())}).then(function(r){return r.done?void 0:Promise.resolve(r.value).then(function(r){if(e._version===t)return st(e,r,n).then(o),e._fulfilled(r),r})});n.catch(function(r){e._version===t&&(st(e,void 0,n),e._rejected(r))})}return new Promise(function(e){e(r.next())}).then(function(e){if(!e.done)return n.then(o),e.value})}(e,n,o,t)):t;var i});o.then(function(t){e._version===n&&(e._value=t,e._fulfilled(t))},function(t){e._version===n&&(e._value=void 0,e._rejected(t))})}function st(e,t,n){var r=e._module._runtime;return e._value=t,e._promise=n,e._outputs.forEach(r._updates.add,r._updates),r._compute()}Object.defineProperties(nt,{load:{value:function(e,t,n){if("function"==typeof t&&(n=t,t=null),"function"!=typeof n)throw new Error("invalid observer");null==t&&(t=new Le);const{modules:r,id:o}=e,i=new Map,a=new nt(t),u=s(o);function s(e){let t=i.get(e);return t||i.set(e,t=a.module()),t}for(const e of r){const t=s(e.id);let r=0;for(const o of e.variables)o.from?t.import(o.remote,o.name,s(o.from)):t===u?t.variable(n(o,r,e.variables)).define(o.name,o.inputs,o.value):t.define(o.name,o.inputs,o.value),++r}return a},writable:!0,configurable:!0}}),Object.defineProperties(nt.prototype,{_compute:{value:function(){return this._computing||(this._computing=this._computeSoon())},writable:!0,configurable:!0},_computeSoon:{value:function(){var e=this;return new Promise(function(t){requestAnimationFrame(function(){t(),e._computeNow()})})},writable:!0,configurable:!0},_computeNow:{value:function(){var e,t,n=[];for((e=new Set(this._dirty)).forEach(function(t){t._inputs.forEach(e.add,e);const n=function(e){if(e._observer!==Ue)return!0;var t=new Set(e._outputs);for(const e of t){if(e._observer!==Ue)return!0;e._outputs.forEach(t.add,t)}return!1}(t);n>t._reachable?this._updates.add(t):n<t._reachable&&t._invalidate(),t._reachable=n},this),(e=new Set(this._updates)).forEach(function(t){t._reachable?(t._indegree=0,t._outputs.forEach(e.add,e)):(t._indegree=-1,e.delete(t))}),this._computing=null,this._updates.clear(),this._dirty.clear(),e.forEach(function(e){e._outputs.forEach(rt)}),e.forEach(function(e){0===e._indegree&&n.push(e)});t=n.pop();)ut(t),t._outputs.forEach(r),e.delete(t);function r(e){0==--e._indegree&&n.push(e)}e.forEach(function(e){var t=new Re("circular definition");e._value=void 0,(e._promise=Promise.reject(t)).catch(Ge),e._rejected(t)})},writable:!0,configurable:!0},module:{value:function(){return new Xe(this)},writable:!0,configurable:!0}})}}]);